# main controller setup?

# Params:
# $a0 - ?

glabel func_80004628
/* 005228 80004628 3C038005 */  lui   $v1, %hi(bssMain_800571DA) # $v1, 0x8005
/* 00522C 8000462C 806371DA */  lb    $v1, %lo(bssMain_800571DA)($v1)
/* 005230 80004630 27BDFFB0 */  addiu $sp, $sp, -0x50
/* 005234 80004634 AFB00038 */  sw    $s0, 0x38($sp)
/* 005238 80004638 00808021 */  addu  $s0, $a0, $zero # store $a0 in $s0
/* 00523C 8000463C 24020001 */  li    $v0, 1
/* 005240 80004640 AFBF004C */  sw    $ra, 0x4c($sp)
/* 005244 80004644 AFB40048 */  sw    $s4, 0x48($sp)
/* 005248 80004648 AFB30044 */  sw    $s3, 0x44($sp)
/* 00524C 8000464C AFB20040 */  sw    $s2, 0x40($sp)
/* 005250 80004650 106200DD */  beq   $v1, $v0, .L800049C8
/* 005254 80004654 AFB1003C */   sw    $s1, 0x3c($sp)

/* 005258 80004658 3C048005 */  lui   $a0, %hi(bssMain_80057008) # $a0, 0x8005
/* 00525C 8000465C 24847008 */  addiu $a0, %lo(bssMain_80057008) # addiu $a0, $a0, 0x7008
/* 005260 80004660 00002821 */  addu  $a1, $zero, $zero
/* 005264 80004664 0C00C9E0 */  jal   osRecvMesg
/* 005268 80004668 24060001 */   li    $a2, 1 # flag: OS_MESG_BLOCK

/* 00526C 8000466C 00008821 */  addu  $s1, $zero, $zero
/* 005270 80004670 27A70010 */  addiu $a3, $sp, 0x10
/* 005274 80004674 3C068005 */  lui   $a2, %hi(bssMain_80056FF0) # $a2, 0x8005
/* 005278 80004678 24C66FF0 */  addiu $a2, %lo(bssMain_80056FF0) # addiu $a2, $a2, 0x6ff0

.L8000467C:
/* 00527C 8000467C 88C20000 */  lwl   $v0, ($a2)
/* 005280 80004680 98C20003 */  lwr   $v0, 3($a2)
/* 005284 80004684 84C30004 */  lh    $v1, 4($a2)
/* 005288 80004688 A8E20000 */  swl   $v0, ($a3)
/* 00528C 8000468C B8E20003 */  swr   $v0, 3($a3)
/* 005290 80004690 A4E30004 */  sh    $v1, 4($a3)
/* 005294 80004694 24E70006 */  addiu $a3, $a3, 6
/* 005298 80004698 26310001 */  addiu $s1, $s1, 1
/* 00529C 8000469C 2E220004 */  sltiu $v0, $s1, 4
/* 0052A0 800046A0 1440FFF6 */  bnez  $v0, .L8000467C
/* 0052A4 800046A4 24C60006 */   addiu $a2, $a2, 6

# OSContPad *pad
/* 0052A8 800046A8 3C048005 */  lui   $a0, %hi(bssMain_80056FF0) # $a0, 0x8005
/* 0052AC 800046AC 0C00C156 */  jal   osContGetReadData
/* 0052B0 800046B0 24846FF0 */   addiu $a0, %lo(bssMain_80056FF0) # addiu $a0, $a0, 0x6ff0

/* 0052B4 800046B4 3C038005 */  lui   $v1, %hi(bssMain_800571D9) # $v1, 0x8005
/* 0052B8 800046B8 906371D9 */  lbu   $v1, %lo(bssMain_800571D9)($v1)
/* 0052BC 800046BC 3C028005 */  lui   $v0, %hi(bssMain_800571D8) # $v0, 0x8005
/* 0052C0 800046C0 904271D8 */  lbu   $v0, %lo(bssMain_800571D8)($v0)
/* 0052C4 800046C4 10430003 */  beq   $v0, $v1, .L800046D4
/* 0052C8 800046C8 00101400 */   sll   $v0, $s0, 0x10

/* 0052CC 800046CC 3C018005 */  lui   $at, %hi(bssMain_800571D8) # $at, 0x8005
/* 0052D0 800046D0 A02371D8 */  sb    $v1, %lo(bssMain_800571D8)($at)

.L800046D4:
/* 0052D4 800046D4 00021403 */  sra   $v0, $v0, 0x10
/* 0052D8 800046D8 24030001 */  li    $v1, 1
/* 0052DC 800046DC 14430012 */  bne   $v0, $v1, .L80004728
/* 0052E0 800046E0 00000000 */   nop   

/* 0052E4 800046E4 3C028004 */  lui   $v0, %hi(D_8003C8B2) # $v0, 0x8004
/* 0052E8 800046E8 8442C8B2 */  lh    $v0, %lo(D_8003C8B2)($v0)
/* 0052EC 800046EC 14400012 */  bnez  $v0, .L80004738
/* 0052F0 800046F0 00000000 */   nop   

# OSMesgQueue *mq
/* 0052F4 800046F4 3C108005 */  lui   $s0, %hi(bssMain_80057008) # $s0, 0x8005
/* 0052F8 800046F8 26107008 */  addiu $s0, %lo(bssMain_80057008) # addiu $s0, $s0, 0x7008
/* 0052FC 800046FC 0C00C10C */  jal   osContStartQuery
/* 005300 80004700 02002021 */   addu  $a0, $s0, $zero

/* 005304 80004704 02002021 */  addu  $a0, $s0, $zero
/* 005308 80004708 00002821 */  addu  $a1, $zero, $zero
/* 00530C 8000470C 0C00C9E0 */  jal   osRecvMesg
/* 005310 80004710 24060001 */   li    $a2, 1 # flag: OS_MESG_BLOCK

# OSContStatus *status
/* 005314 80004714 3C048005 */  lui   $a0, %hi(bssMain_80057028) # $a0, 0x8005
/* 005318 80004718 0C00C12C */  jal   osContGetQuery
/* 00531C 8000471C 24847028 */   addiu $a0, %lo(bssMain_80057028) # addiu $a0, $a0, 0x7028

/* 005320 80004720 0800123E */  j     .L800048F8
/* 005324 80004724 00000000 */   nop   

.L80004728:
/* 005328 80004728 3C028004 */  lui   $v0, %hi(D_8003C8B2) # $v0, 0x8004
/* 00532C 8000472C 8442C8B2 */  lh    $v0, %lo(D_8003C8B2)($v0)
/* 005330 80004730 10400004 */  beqz  $v0, .L80004744
/* 005334 80004734 00008821 */   addu  $s1, $zero, $zero

.L80004738:
/* 005338 80004738 0C0012ED */  jal   func_80004BB4
/* 00533C 8000473C 24040001 */   li    $a0, 1

/* 005340 80004740 00008821 */  addu  $s1, $zero, $zero

.L80004744:
/* 005344 80004744 24140001 */  li    $s4, 1
/* 005348 80004748 3C108005 */  lui   $s0, %hi(bssMain_800571E4) # $s0, 0x8005
/* 00534C 8000474C 261071E4 */  addiu $s0, %lo(bssMain_800571E4) # addiu $s0, $s0, 0x71e4
/* 005350 80004750 3C138005 */  lui   $s3, %hi(bssMain_800571E0) # $s3, 0x8005
/* 005354 80004754 267371E0 */  addiu $s3, %lo(bssMain_800571E0) # addiu $s3, $s3, 0x71e0
/* 005358 80004758 3C128005 */  lui   $s2, %hi(bssMain_80057038) # $s2, 0x8005
/* 00535C 8000475C 26527038 */  addiu $s2, %lo(bssMain_80057038) # addiu $s2, $s2, 0x7038

.L80004760:
/* 005360 80004760 3C028005 */  lui   $v0, %hi(bssMain_800571DB) # $v0, 0x8005
/* 005364 80004764 904271DB */  lbu   $v0, %lo(bssMain_800571DB)($v0)
/* 005368 80004768 02221007 */  srav  $v0, $v0, $s1
/* 00536C 8000476C 30420001 */  andi  $v0, $v0, 1
/* 005370 80004770 1040002B */  beqz  $v0, .L80004820
/* 005374 80004774 00000000 */   nop   

/* 005378 80004778 3C028005 */  lui   $v0, %hi(bssMain_800571DC)
/* 00537C 8000477C 00511021 */  addu  $v0, $v0, $s1
/* 005380 80004780 804271DC */  lb    $v0, %lo(bssMain_800571DC)($v0)
/* 005384 80004784 10400013 */  beqz  $v0, .L800047D4
/* 005388 80004788 00000000 */   nop   

/* 00538C 8000478C 82020000 */  lb    $v0, ($s0)
/* 005390 80004790 04400013 */  bltz  $v0, .L800047E0
/* 005394 80004794 00000000 */   nop   

/* 005398 80004798 14400004 */  bnez  $v0, .L800047AC
/* 00539C 8000479C 02402021 */   addu  $a0, $s2, $zero

/* 0053A0 800047A0 0C00D1A4 */  jal   __osMotorAccess
/* 0053A4 800047A4 24050001 */   li    $a1, 1 # MOTOR_START

/* 0053A8 800047A8 82020000 */  lb    $v0, ($s0)

.L800047AC:
/* 0053AC 800047AC 04400004 */  bltz  $v0, .L800047C0
/* 0053B0 800047B0 00401821 */   addu  $v1, $v0, $zero

/* 0053B4 800047B4 24620001 */  addiu $v0, $v1, 1
/* 0053B8 800047B8 08001220 */  j     .L80004880
/* 0053BC 800047BC A2020000 */   sb    $v0, ($s0)

.L800047C0:
/* 0053C0 800047C0 00112400 */  sll   $a0, $s1, 0x10
/* 0053C4 800047C4 0C0012DD */  jal   func_80004B74
/* 0053C8 800047C8 00042403 */   sra   $a0, $a0, 0x10

/* 0053CC 800047CC 08001221 */  j     .L80004884
/* 0053D0 800047D0 26100001 */   addiu $s0, $s0, 1

.L800047D4:
/* 0053D4 800047D4 82020000 */  lb    $v0, ($s0)
/* 0053D8 800047D8 0443002A */  bgezl $v0, .L80004884
/* 0053DC 800047DC 26100001 */   addiu $s0, $s0, 1

.L800047E0:
/* 0053E0 800047E0 82620000 */  lb    $v0, ($s3)
/* 0053E4 800047E4 14540007 */  bne   $v0, $s4, .L80004804
/* 0053E8 800047E8 02402021 */   addu  $a0, $s2, $zero

# OSMesgQueue *mq
/* 0053EC 800047EC 3C048005 */  lui   $a0, %hi(bssMain_80057008) # $a0, 0x8005
/* 0053F0 800047F0 24847008 */  addiu $a0, %lo(bssMain_80057008) # addiu $a0, $a0, 0x7008
# OSPfs *pfs
/* 0053F4 800047F4 02402821 */  addu  $a1, $s2, $zero
/* 0053F8 800047F8 0C00D1F5 */  jal   osMotorInit
/* 0053FC 800047FC 02203021 */   addu  $a2, $s1, $zero # controller number

/* 005400 80004800 02402021 */  addu  $a0, $s2, $zero

.L80004804:
/* 005404 80004804 0C00D1A4 */  jal   __osMotorAccess
/* 005408 80004808 00002821 */   addu  $a1, $zero, $zero # MOTOR_STOP

/* 00540C 8000480C 24030004 */  li    $v1, 4
/* 005410 80004810 5043001C */  beql  $v0, $v1, .L80004884
/* 005414 80004814 26100001 */   addiu $s0, $s0, 1

/* 005418 80004818 08001216 */  j     .L80004858
/* 00541C 8000481C 00000000 */   nop   

.L80004820:
/* 005420 80004820 82020000 */  lb    $v0, ($s0)
/* 005424 80004824 04430017 */  bgezl $v0, .L80004884
/* 005428 80004828 26100001 */   addiu $s0, $s0, 1

/* 00542C 8000482C 82620000 */  lb    $v0, ($s3)
/* 005430 80004830 54540014 */  bnel  $v0, $s4, .L80004884
/* 005434 80004834 26100001 */   addiu $s0, $s0, 1

# OSMesgQueue *mq
/* 005438 80004838 3C048005 */  lui   $a0, %hi(bssMain_80057008) # $a0, 0x8005
/* 00543C 8000483C 24847008 */  addiu $a0, %lo(bssMain_80057008) # addiu $a0, $a0, 0x7008
# OSPfs *pfs
/* 005440 80004840 02402821 */  addu  $a1, $s2, $zero
/* 005444 80004844 0C00D1F5 */  jal   osMotorInit
/* 005448 80004848 02203021 */   addu  $a2, $s1, $zero  # controller number

/* 00544C 8000484C 02402021 */  addu  $a0, $s2, $zero
/* 005450 80004850 0C00D1A4 */  jal   __osMotorAccess
/* 005454 80004854 00002821 */   addu  $a1, $zero, $zero # MOTOR_STOP

.L80004858:
/* 005458 80004858 92020000 */  lbu   $v0, ($s0)
/* 00545C 8000485C 2442FFFF */  addiu $v0, $v0, -1
/* 005460 80004860 A2020000 */  sb    $v0, ($s0)
/* 005464 80004864 00021600 */  sll   $v0, $v0, 0x18
/* 005468 80004868 00021603 */  sra   $v0, $v0, 0x18
/* 00546C 8000486C 2842FFFD */  slti  $v0, $v0, -3
/* 005470 80004870 50400004 */  beql  $v0, $zero, .L80004884
/* 005474 80004874 26100001 */   addiu $s0, $s0, 1

/* 005478 80004878 A2600000 */  sb    $zero, ($s3)
/* 00547C 8000487C A2000000 */  sb    $zero, ($s0)

.L80004880:
/* 005480 80004880 26100001 */  addiu $s0, $s0, 1

.L80004884:
/* 005484 80004884 26730001 */  addiu $s3, $s3, 1
/* 005488 80004888 26310001 */  addiu $s1, $s1, 1
/* 00548C 8000488C 2E220004 */  sltiu $v0, $s1, 4
/* 005490 80004890 1440FFB3 */  bnez  $v0, .L80004760
/* 005494 80004894 26520068 */   addiu $s2, $s2, 0x68

/* 005498 80004898 3C048004 */  lui   $a0, %hi(D_8003C8D0) # $a0, 0x8004
/* 00549C 8000489C 8084C8D0 */  lb    $a0, %lo(D_8003C8D0)($a0)
/* 0054A0 800048A0 28820004 */  slti  $v0, $a0, 4
/* 0054A4 800048A4 10400007 */  beqz  $v0, .L800048C4
/* 0054A8 800048A8 00801821 */   addu  $v1, $a0, $zero

/* 0054AC 800048AC 24620001 */  addiu $v0, $v1, 1
/* 0054B0 800048B0 3C018004 */  lui   $at, %hi(D_8003C8D0) # $at, 0x8004
/* 0054B4 800048B4 0C001299 */  jal   func_80004A64
/* 0054B8 800048B8 A022C8D0 */   sb    $v0, %lo(D_8003C8D0)($at)

/* 0054BC 800048BC 0800123E */  j     .L800048F8
/* 0054C0 800048C0 00000000 */   nop   

.L800048C4:
/* 0054C4 800048C4 3C108005 */  lui   $s0, %hi(bssMain_80057008) # $s0, 0x8005
/* 0054C8 800048C8 26107008 */  addiu $s0, %lo(bssMain_80057008) # addiu $s0, $s0, 0x7008
/* 0054CC 800048CC 0C00C10C */  jal   osContStartQuery
/* 0054D0 800048D0 02002021 */   addu  $a0, $s0, $zero

/* 0054D4 800048D4 02002021 */  addu  $a0, $s0, $zero
/* 0054D8 800048D8 00002821 */  addu  $a1, $zero, $zero
/* 0054DC 800048DC 0C00C9E0 */  jal   osRecvMesg
/* 0054E0 800048E0 24060001 */   li    $a2, 1 # flag: OS_MESG_BLOCK

# OSContStatus *status
/* 0054E4 800048E4 3C048005 */  lui   $a0, %hi(bssMain_80057028) # $a0, 0x8005
/* 0054E8 800048E8 0C00C12C */  jal   osContGetQuery
/* 0054EC 800048EC 24847028 */   addiu $a0, %lo(bssMain_80057028) # addiu $a0, $a0, 0x7028

/* 0054F0 800048F0 3C018004 */  lui   $at, %hi(D_8003C8D0) # $at, 0x8004
/* 0054F4 800048F4 A020C8D0 */  sb    $zero, %lo(D_8003C8D0)($at)

.L800048F8:
# OSMesgQueue *mq
/* 0054F8 800048F8 3C048005 */  lui   $a0, %hi(bssMain_80057008) # $a0, 0x8005
/* 0054FC 800048FC 24847008 */  addiu $a0, %lo(bssMain_80057008) # addiu $a0, $a0, 0x7008
/* 005500 80004900 0C00C134 */  jal   osContStartReadData
/* 005504 80004904 00008821 */   addu  $s1, $zero, $zero

/* 005508 80004908 27A80010 */  addiu $t0, $sp, 0x10
/* 00550C 8000490C 3C078005 */  lui   $a3, %hi(bssMain_80056FF0) # $a3, 0x8005
/* 005510 80004910 24E76FF0 */  addiu $a3, %lo(bssMain_80056FF0) # addiu $a3, $a3, 0x6ff0
/* 005514 80004914 00003021 */  addu  $a2, $zero, $zero
/* 005518 80004918 3C05800A */  lui   $a1, %hi(bssMain_8009B150) # $a1, 0x800a
/* 00551C 8000491C 24A5B150 */  addiu $a1, %lo(bssMain_8009B150) # addiu $a1, $a1, -0x4eb0

.L80004920:
/* 005520 80004920 3C028005 */  lui   $v0, %hi(bssMain_80056FF4)
/* 005524 80004924 00461021 */  addu  $v0, $v0, $a2
/* 005528 80004928 90426FF4 */  lbu   $v0, %lo(bssMain_80056FF4)($v0)
/* 00552C 8000492C 54400008 */  bnezl $v0, .L80004950
/* 005530 80004930 A4A00004 */   sh    $zero, 4($a1)

/* 005534 80004934 3C028005 */  lui   $v0, %hi(bssMain_800571D8) # $v0, 0x8005
/* 005538 80004938 904271D8 */  lbu   $v0, %lo(bssMain_800571D8)($v0)
/* 00553C 8000493C 02221007 */  srav  $v0, $v0, $s1
/* 005540 80004940 30420001 */  andi  $v0, $v0, 1
/* 005544 80004944 14400007 */  bnez  $v0, .L80004964
/* 005548 80004948 00000000 */   nop   

/* 00554C 8000494C A4A00004 */  sh    $zero, 4($a1)

.L80004950:
/* 005550 80004950 A4A00006 */  sh    $zero, 6($a1)
/* 005554 80004954 A4A00008 */  sh    $zero, 8($a1)
/* 005558 80004958 A0A0000A */  sb    $zero, 0xa($a1)
/* 00555C 8000495C 0800126B */  j     .L800049AC
/* 005560 80004960 A0A0000B */   sb    $zero, 0xb($a1)

.L80004964:
/* 005564 80004964 94E30000 */  lhu   $v1, ($a3)
/* 005568 80004968 95040000 */  lhu   $a0, ($t0)
/* 00556C 8000496C A4A30004 */  sh    $v1, 4($a1)
/* 005570 80004970 94E20000 */  lhu   $v0, ($a3)
/* 005574 80004974 00641826 */  xor   $v1, $v1, $a0
/* 005578 80004978 00621024 */  and   $v0, $v1, $v0
/* 00557C 8000497C A4A20006 */  sh    $v0, 6($a1)
/* 005580 80004980 95020000 */  lhu   $v0, ($t0)
/* 005584 80004984 00621824 */  and   $v1, $v1, $v0
/* 005588 80004988 A4A30008 */  sh    $v1, 8($a1)
/* 00558C 8000498C 3C028005 */  lui   $v0, %hi(bssMain_80056FF2)
/* 005590 80004990 00461021 */  addu  $v0, $v0, $a2
/* 005594 80004994 90426FF2 */  lbu   $v0, %lo(bssMain_80056FF2)($v0)
/* 005598 80004998 A0A2000A */  sb    $v0, 0xa($a1)
/* 00559C 8000499C 3C028005 */  lui   $v0, %hi(bssMain_80056FF3)
/* 0055A0 800049A0 00461021 */  addu  $v0, $v0, $a2
/* 0055A4 800049A4 90426FF3 */  lbu   $v0, %lo(bssMain_80056FF3)($v0)
/* 0055A8 800049A8 A0A2000B */  sb    $v0, 0xb($a1)

.L800049AC:
/* 0055AC 800049AC 25080006 */  addiu $t0, $t0, 6
/* 0055B0 800049B0 24E70006 */  addiu $a3, $a3, 6
/* 0055B4 800049B4 24C60006 */  addiu $a2, $a2, 6
/* 0055B8 800049B8 26310001 */  addiu $s1, $s1, 1
/* 0055BC 800049BC 2E220004 */  sltiu $v0, $s1, 4
/* 0055C0 800049C0 1440FFD7 */  bnez  $v0, .L80004920
/* 0055C4 800049C4 24A5000C */   addiu $a1, $a1, 0xc

.L800049C8:
/* 0055C8 800049C8 8FBF004C */  lw    $ra, 0x4c($sp)
/* 0055CC 800049CC 8FB40048 */  lw    $s4, 0x48($sp)
/* 0055D0 800049D0 8FB30044 */  lw    $s3, 0x44($sp)
/* 0055D4 800049D4 8FB20040 */  lw    $s2, 0x40($sp)
/* 0055D8 800049D8 8FB1003C */  lw    $s1, 0x3c($sp)
/* 0055DC 800049DC 8FB00038 */  lw    $s0, 0x38($sp)
/* 0055E0 800049E0 03E00008 */  jr    $ra
/* 0055E4 800049E4 27BD0050 */   addiu $sp, $sp, 0x50
