glabel DecompressLZSS
/* 004C08 80004008 27BDFFF8 */  addiu $sp, $sp, -8
/* 004C0C 8000400C 8C8C0000 */  lw    $t4, ($a0) # get uncompressed size
/* 004C10 80004010 24840004 */  addiu $a0, $a0, 4
/* 004C14 80004014 2D821000 */  sltiu $v0, $t4, 0x1000
/* 004C18 80004018 10400002 */  beqz  $v0, .L80004024
/* 004C1C 8000401C 24081000 */   li    $t0, 4096

/* 004C20 80004020 01804021 */  addu  $t0, $t4, $zero

.L80004024:
/* 004C24 80004024 11000009 */  beqz  $t0, .L8000404C
/* 004C28 80004028 00005821 */   addu  $t3, $zero, $zero

/* 004C2C 8000402C 00A01821 */  addu  $v1, $a1, $zero
/* 004C30 80004030 01053021 */  addu  $a2, $t0, $a1
/* 004C34 80004034 A0600000 */  sb    $zero, ($v1)

.L80004038:
/* 004C38 80004038 24630001 */  addiu $v1, $v1, 1
/* 004C3C 8000403C 0066102B */  sltu  $v0, $v1, $a2
/* 004C40 80004040 5440FFFD */  bnezl $v0, .L80004038
/* 004C44 80004044 A0600000 */   sb    $zero, ($v1)

/* 004C48 80004048 00005821 */  addu  $t3, $zero, $zero

.L8000404C:
/* 004C4C 8000404C 11800034 */  beqz  $t4, .L80004120
/* 004C50 80004050 00004021 */   addu  $t0, $zero, $zero

/* 004C54 80004054 00A05021 */  addu  $t2, $a1, $zero
/* 004C58 80004058 000B1042 */  srl   $v0, $t3, 1

.L8000405C:
/* 004C5C 8000405C 00405821 */  addu  $t3, $v0, $zero
/* 004C60 80004060 30420100 */  andi  $v0, $v0, 0x100
/* 004C64 80004064 14400005 */  bnez  $v0, .L8000407C
/* 004C68 80004068 31620001 */   andi  $v0, $t3, 1

/* 004C6C 8000406C 90820000 */  lbu   $v0, ($a0)
/* 004C70 80004070 24840001 */  addiu $a0, $a0, 1
/* 004C74 80004074 344BFF00 */  ori   $t3, $v0, 0xff00
/* 004C78 80004078 31620001 */  andi  $v0, $t3, 1

.L8000407C:
/* 004C7C 8000407C 10400007 */  beqz  $v0, .L8000409C
/* 004C80 80004080 00000000 */   nop   

/* 004C84 80004084 90820000 */  lbu   $v0, ($a0)
/* 004C88 80004088 24840001 */  addiu $a0, $a0, 1
/* 004C8C 8000408C 25080001 */  addiu $t0, $t0, 1
/* 004C90 80004090 A1420000 */  sb    $v0, ($t2)
/* 004C94 80004094 08001045 */  j     .L80004114
/* 004C98 80004098 254A0001 */   addiu $t2, $t2, 1

.L8000409C:
/* 004C9C 8000409C 90830000 */  lbu   $v1, ($a0)
/* 004CA0 800040A0 24840001 */  addiu $a0, $a0, 1
/* 004CA4 800040A4 90890000 */  lbu   $t1, ($a0)
/* 004CA8 800040A8 312200F0 */  andi  $v0, $t1, 0xf0
/* 004CAC 800040AC 00021100 */  sll   $v0, $v0, 4
/* 004CB0 800040B0 00621825 */  or    $v1, $v1, $v0
/* 004CB4 800040B4 3122000F */  andi  $v0, $t1, 0xf
/* 004CB8 800040B8 24490002 */  addiu $t1, $v0, 2
/* 004CBC 800040BC 24630012 */  addiu $v1, $v1, 0x12
/* 004CC0 800040C0 30630FFF */  andi  $v1, $v1, 0xfff
/* 004CC4 800040C4 31020FFF */  andi  $v0, $t0, 0xfff
/* 004CC8 800040C8 00621823 */  subu  $v1, $v1, $v0
/* 004CCC 800040CC 04600002 */  bltz  $v1, .L800040D8
/* 004CD0 800040D0 24840001 */   addiu $a0, $a0, 1

/* 004CD4 800040D4 2463F000 */  addiu $v1, $v1, -0x1000

.L800040D8:
/* 004CD8 800040D8 00003821 */  addu  $a3, $zero, $zero
/* 004CDC 800040DC 01053021 */  addu  $a2, $t0, $a1

.L800040E0:
/* 004CE0 800040E0 01031021 */  addu  $v0, $t0, $v1
/* 004CE4 800040E4 04400004 */  bltz  $v0, .L800040F8
/* 004CE8 800040E8 00A21021 */   addu  $v0, $a1, $v0

/* 004CEC 800040EC 90420000 */  lbu   $v0, ($v0)
/* 004CF0 800040F0 0800103F */  j     .L800040FC
/* 004CF4 800040F4 A0C20000 */   sb    $v0, ($a2)

.L800040F8:
/* 004CF8 800040F8 A0C00000 */  sb    $zero, ($a2)

.L800040FC:
/* 004CFC 800040FC 24C60001 */  addiu $a2, $a2, 1
/* 004D00 80004100 254A0001 */  addiu $t2, $t2, 1
/* 004D04 80004104 24E70001 */  addiu $a3, $a3, 1
/* 004D08 80004108 0127102B */  sltu  $v0, $t1, $a3
/* 004D0C 8000410C 1040FFF4 */  beqz  $v0, .L800040E0
/* 004D10 80004110 25080001 */   addiu $t0, $t0, 1

.L80004114:
/* 004D14 80004114 010C102B */  sltu  $v0, $t0, $t4
/* 004D18 80004118 1440FFD0 */  bnez  $v0, .L8000405C
/* 004D1C 8000411C 000B1042 */   srl   $v0, $t3, 1

.L80004120:
/* 004D20 80004120 27BD0008 */  addiu $sp, $sp, 8
/* 004D24 80004124 03E00008 */  jr    $ra
/* 004D28 80004128 00000000 */   nop   

/* 004D2C 8000412C 00000000 */  nop   
