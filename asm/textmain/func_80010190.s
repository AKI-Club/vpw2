# some sort of 3d rendering function

# Params:
# $a0 - write location?
# $a1 - model pointer
# $a2 - textures pointer
# $a3 - num entries

glabel func_80010190
/* 010D90 80010190 27BDFFB0 */  addiu $sp, $sp, -0x50
/* 010D94 80010194 AFB70044 */  sw    $s7, 0x44($sp)
/* 010D98 80010198 0080B821 */  addu  $s7, $a0, $zero
/* 010D9C 8001019C AFB5003C */  sw    $s5, 0x3c($sp)
/* 010DA0 800101A0 00A0A821 */  addu  $s5, $a1, $zero # store model pointer in $s5
/* 010DA4 800101A4 00071400 */  sll   $v0, $a3, 0x10
/* 010DA8 800101A8 AFB1002C */  sw    $s1, 0x2c($sp)
/* 010DAC 800101AC 00028C03 */  sra   $s1, $v0, 0x10
/* 010DB0 800101B0 00112100 */  sll   $a0, $s1, 4
/* 010DB4 800101B4 24840040 */  addiu $a0, $a0, 0x40
/* 010DB8 800101B8 AFBE0048 */  sw    $fp, 0x48($sp)
/* 010DBC 800101BC 00E0F021 */  addu  $fp, $a3, $zero
/* 010DC0 800101C0 AFBF004C */  sw    $ra, 0x4c($sp)
/* 010DC4 800101C4 AFB60040 */  sw    $s6, 0x40($sp)
/* 010DC8 800101C8 AFB40038 */  sw    $s4, 0x38($sp)
/* 010DCC 800101CC AFB30034 */  sw    $s3, 0x34($sp)
/* 010DD0 800101D0 AFB20030 */  sw    $s2, 0x30($sp)
/* 010DD4 800101D4 AFB00028 */  sw    $s0, 0x28($sp)
/* 010DD8 800101D8 0C000226 */  jal   aki_malloc
/* 010DDC 800101DC AFA60014 */   sw    $a2, 0x14($sp)

/* 010DE0 800101E0 02E08021 */  addu  $s0, $s7, $zero
/* 010DE4 800101E4 00009821 */  addu  $s3, $zero, $zero
/* 010DE8 800101E8 12200019 */  beqz  $s1, .L80010250
/* 010DEC 800101EC 0040A021 */   addu  $s4, $v0, $zero

/* 010DF0 800101F0 0220B021 */  addu  $s6, $s1, $zero
/* 010DF4 800101F4 8FB20014 */  lw    $s2, 0x14($sp) # textures pointer
/* 010DF8 800101F8 02A08821 */  addu  $s1, $s5, $zero

.L800101FC:
/* 010DFC 800101FC 86250000 */  lh    $a1, ($s1) # load file ID
/* 010E00 80010200 0C002FCF */  jal   func_8000BF3C # model loading related
/* 010E04 80010204 02002021 */   addu  $a0, $s0, $zero

/* 010E08 80010208 96460000 */  lhu   $a2, ($s2)
/* 010E0C 8001020C 10C0000A */  beqz  $a2, .L80010238
/* 010E10 80010210 02002021 */   addu  $a0, $s0, $zero

/* 010E14 80010214 24C50001 */  addiu $a1, $a2, 1
/* 010E18 80010218 00052C00 */  sll   $a1, $a1, 0x10
/* 010E1C 8001021C 00052C03 */  sra   $a1, $a1, 0x10
/* 010E20 80010220 00063400 */  sll   $a2, $a2, 0x10
/* 010E24 80010224 0C003192 */  jal   func_8000C648
/* 010E28 80010228 00063403 */   sra   $a2, $a2, 0x10

/* 010E2C 8001022C 02002021 */  addu  $a0, $s0, $zero
/* 010E30 80010230 0C00399D */  jal   func_8000E674
/* 010E34 80010234 24050001 */   li    $a1, 1

.L80010238:
/* 010E38 80010238 26100034 */  addiu $s0, $s0, 0x34
/* 010E3C 8001023C 26520002 */  addiu $s2, $s2, 2
/* 010E40 80010240 26730001 */  addiu $s3, $s3, 1
/* 010E44 80010244 0276102B */  sltu  $v0, $s3, $s6
/* 010E48 80010248 1440FFEC */  bnez  $v0, .L800101FC
/* 010E4C 8001024C 26310002 */   addiu $s1, $s1, 2

.L80010250:
/* 010E50 80010250 3C02E200 */  lui   $v0, (0xE200001C >> 16) # lui $v0, 0xe200
/* 010E54 80010254 3442001C */  ori   $v0, (0xE200001C & 0xFFFF) # ori $v0, $v0, 0x1c
/* 010E58 80010258 3C048004 */  lui   $a0, %hi(var_8003FDB2) # $a0, 0x8004
/* 010E5C 8001025C 9484FDB2 */  lhu   $a0, %lo(var_8003FDB2)($a0)
/* 010E60 80010260 3C030F0A */  lui   $v1, (0x0F0A7008 >> 16) # lui $v1, 0xf0a
/* 010E64 80010264 34637008 */  ori   $v1, (0x0F0A7008 & 0xFFFF) # ori $v1, $v1, 0x7008
/* 010E68 80010268 AE820000 */  sw    $v0, ($s4)
/* 010E6C 8001026C 1480000C */  bnez  $a0, .L800102A0
/* 010E70 80010270 AE830004 */   sw    $v1, 4($s4)

/* 010E74 80010274 3C02FC15 */  lui   $v0, (0xFC15FE2B >> 16) # lui $v0, 0xfc15
/* 010E78 80010278 3442FE2B */  ori   $v0, (0xFC15FE2B & 0xFFFF) # ori $v0, $v0, 0xfe2b
/* 010E7C 8001027C 26920018 */  addiu $s2, $s4, 0x18
/* 010E80 80010280 3C03E300 */  lui   $v1, (0xE3000A01 >> 16) # lui $v1, 0xe300
/* 010E84 80010284 34630A01 */  ori   $v1, (0xE3000A01 & 0xFFFF) # ori $v1, $v1, 0xa01
/* 010E88 80010288 AE820008 */  sw    $v0, 8($s4)
/* 010E8C 8001028C 2402F3F9 */  li    $v0, -3079
/* 010E90 80010290 AE82000C */  sw    $v0, 0xc($s4)
/* 010E94 80010294 AE830010 */  sw    $v1, 0x10($s4)
/* 010E98 80010298 080040B4 */  j     .L800102D0
/* 010E9C 8001029C AE800014 */   sw    $zero, 0x14($s4)

.L800102A0:
/* 010EA0 800102A0 3C04FC15 */  lui   $a0, (0xFC15FEA3 >> 16) # lui $a0, 0xfc15
/* 010EA4 800102A4 3484FEA3 */  ori   $a0, (0xFC15FEA3 & 0xFFFF) # ori $a0, $a0, 0xfea3
/* 010EA8 800102A8 3C03F00F */  lui   $v1, (0xF00FF23F >> 16) # lui $v1, 0xf00f
/* 010EAC 800102AC 3463F23F */  ori   $v1, (0xF00FF23F & 0xFFFF) # ori $v1, $v1, 0xf23f
/* 010EB0 800102B0 26920018 */  addiu $s2, $s4, 0x18
/* 010EB4 800102B4 3C02E300 */  lui   $v0, (0xE3000A01 >> 16) # lui $v0, 0xe300
/* 010EB8 800102B8 34420A01 */  ori   $v0, (0xE3000A01 & 0xFFFF) # ori $v0, $v0, 0xa01
/* 010EBC 800102BC AE820010 */  sw    $v0, 0x10($s4)
/* 010EC0 800102C0 3C020010 */  lui   $v0, 0x10
/* 010EC4 800102C4 AE840008 */  sw    $a0, 8($s4)
/* 010EC8 800102C8 AE83000C */  sw    $v1, 0xc($s4)
/* 010ECC 800102CC AE820014 */  sw    $v0, 0x14($s4)

.L800102D0:
/* 010ED0 800102D0 02E08021 */  addu  $s0, $s7, $zero
/* 010ED4 800102D4 001E1400 */  sll   $v0, $fp, 0x10
/* 010ED8 800102D8 00021403 */  sra   $v0, $v0, 0x10
/* 010EDC 800102DC 10400035 */  beqz  $v0, .L800103B4
/* 010EE0 800102E0 00009821 */   addu  $s3, $zero, $zero

/* 010EE4 800102E4 3C17DE00 */  lui   $s7, 0xde00
/* 010EE8 800102E8 3C168000 */  lui   $s6, 0x8000
/* 010EEC 800102EC 0040F021 */  addu  $fp, $v0, $zero
/* 010EF0 800102F0 8FB50014 */  lw    $s5, 0x14($sp)
/* 010EF4 800102F4 2611001C */  addiu $s1, $s0, 0x1c
/* 010EF8 800102F8 2650FFFC */  addiu $s0, $s2, -4

.L800102FC:
/* 010EFC 800102FC 96A20000 */  lhu   $v0, ($s5)
/* 010F00 80010300 50400028 */  beql  $v0, $zero, .L800103A4
/* 010F04 80010304 26310034 */   addiu $s1, $s1, 0x34

/* 010F08 80010308 8222FFE5 */  lb    $v0, -0x1b($s1)
/* 010F0C 8001030C 58400025 */  blezl $v0, .L800103A4
/* 010F10 80010310 26310034 */   addiu $s1, $s1, 0x34

/* 010F14 80010314 8E22FFF8 */  lw    $v0, -8($s1)
/* 010F18 80010318 10400010 */  beqz  $v0, .L8001035C
/* 010F1C 8001031C 3C080100 */   lui   $t0, 0x100

/* 010F20 80010320 8222FFE6 */  lb    $v0, -0x1a($s1)
/* 010F24 80010324 26100008 */  addiu $s0, $s0, 8
/* 010F28 80010328 8223FFE7 */  lb    $v1, -0x19($s1)
/* 010F2C 8001032C 304400FF */  andi  $a0, $v0, 0xff
/* 010F30 80010330 00042300 */  sll   $a0, $a0, 0xc
/* 010F34 80010334 00621821 */  addu  $v1, $v1, $v0
/* 010F38 80010338 3063007F */  andi  $v1, $v1, 0x7f
/* 010F3C 8001033C 00031840 */  sll   $v1, $v1, 1
/* 010F40 80010340 00681825 */  or    $v1, $v1, $t0
/* 010F44 80010344 00832025 */  or    $a0, $a0, $v1
/* 010F48 80010348 AE04FFFC */  sw    $a0, -4($s0)

/* 010F4C 8001034C 8E24FFF8 */  lw    $a0, -8($s1)
/* 010F50 80010350 0C00C288 */  jal   osVirtualToPhysical
/* 010F54 80010354 26520008 */   addiu $s2, $s2, 8

/* 010F58 80010358 AE020000 */  sw    $v0, ($s0)
.L8001035C:
/* 010F5C 8001035C 8E22FFFC */  lw    $v0, -4($s1)
/* 010F60 80010360 10400006 */  beqz  $v0, .L8001037C
/* 010F64 80010364 00000000 */   nop   

/* 010F68 80010368 26100008 */  addiu $s0, $s0, 8
/* 010F6C 8001036C AE17FFFC */  sw    $s7, -4($s0)
/* 010F70 80010370 8E22FFFC */  lw    $v0, -4($s1)
/* 010F74 80010374 080040E6 */  j     .L80010398
/* 010F78 80010378 26520008 */   addiu $s2, $s2, 8

.L8001037C:
/* 010F7C 8001037C 8E220000 */  lw    $v0, ($s1)
/* 010F80 80010380 50400008 */  beql  $v0, $zero, .L800103A4
/* 010F84 80010384 26310034 */   addiu $s1, $s1, 0x34

/* 010F88 80010388 26100008 */  addiu $s0, $s0, 8
/* 010F8C 8001038C AE17FFFC */  sw    $s7, -4($s0)
/* 010F90 80010390 8E220000 */  lw    $v0, ($s1)
/* 010F94 80010394 26520008 */  addiu $s2, $s2, 8

.L80010398:
/* 010F98 80010398 00561023 */  subu  $v0, $v0, $s6
/* 010F9C 8001039C AE020000 */  sw    $v0, ($s0)
/* 010FA0 800103A0 26310034 */  addiu $s1, $s1, 0x34

.L800103A4:
/* 010FA4 800103A4 26730001 */  addiu $s3, $s3, 1
/* 010FA8 800103A8 027E102B */  sltu  $v0, $s3, $fp
/* 010FAC 800103AC 1440FFD3 */  bnez  $v0, .L800102FC
/* 010FB0 800103B0 26B50002 */   addiu $s5, $s5, 2

.L800103B4:
/* 010FB4 800103B4 02801021 */  addu  $v0, $s4, $zero
/* 010FB8 800103B8 02402021 */  addu  $a0, $s2, $zero
/* 010FBC 800103BC 3C03DF00 */  lui   $v1, 0xdf00
/* 010FC0 800103C0 AC830000 */  sw    $v1, ($a0)
/* 010FC4 800103C4 AC800004 */  sw    $zero, 4($a0)
/* 010FC8 800103C8 8FBF004C */  lw    $ra, 0x4c($sp)
/* 010FCC 800103CC 8FBE0048 */  lw    $fp, 0x48($sp)
/* 010FD0 800103D0 8FB70044 */  lw    $s7, 0x44($sp)
/* 010FD4 800103D4 8FB60040 */  lw    $s6, 0x40($sp)
/* 010FD8 800103D8 8FB5003C */  lw    $s5, 0x3c($sp)
/* 010FDC 800103DC 8FB40038 */  lw    $s4, 0x38($sp)
/* 010FE0 800103E0 8FB30034 */  lw    $s3, 0x34($sp)
/* 010FE4 800103E4 8FB20030 */  lw    $s2, 0x30($sp)
/* 010FE8 800103E8 8FB1002C */  lw    $s1, 0x2c($sp)
/* 010FEC 800103EC 8FB00028 */  lw    $s0, 0x28($sp)
/* 010FF0 800103F0 03E00008 */  jr    $ra
/* 010FF4 800103F4 27BD0050 */   addiu $sp, $sp, 0x50
